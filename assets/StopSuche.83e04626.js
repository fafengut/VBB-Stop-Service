import{u as y,r as k,o as s,c as t,b as r,w as f,v as x,e as b,f as w,t as d,F as g,g as C,h as a,i as u}from"./index.81b87fab.js";import{a as B,u as F,_ as L,b as $,c as S,d as Q,e as T,f as I,g as N,h as O,i as R}from"./favorite.ff9442b4.js";const V="locations",D={findByQuery:async _=>await B.get(V,_)},K={class:"pt-10 space-x-5 place-content-center"},A={key:0,class:"flex justify-center items-center mt-10"},U=r("div",{class:"animate-spin rounded-full h-64 w-64 border-b-8 border-white-900","data-testid":"loading-indicator"},null,-1),j=[U],q={key:1,class:"mt-10"},E={class:"block"},M={key:2,class:"mt-10"},z={class:"flex"},G=["onClick","data-test"],H=["onClick"],J=["onClick"],P=["onClick"],W={key:0,src:S,alt:"S-Bahn-Logo",class:"w-6"},X={key:1,src:Q,alt:"U-Bahn-Logo",class:"w-6"},Y={key:2,src:T,alt:"Tram-Logo",class:"w-6"},Z={key:3,src:I,alt:"Bus-Logo",class:"w-6"},ee={key:4,src:N,alt:"Faehre-Logo",class:"w-6"},se={key:5,src:O,alt:"Fernverkehr-Logo",class:"w-6"},te={key:6,src:R,alt:"Regionalverkehr-Logo",class:"w-6"},re={__name:"StopSuche",setup(_){const v=y(),o=k({searchQuery:"",loading:!1,error:null,stops:[]}),m=async()=>{try{o.value.loading=!0;const i=await D.findByQuery({query:o.value.searchQuery,poi:!1,addresses:!1});o.value.stops=i.data}catch(i){o.value.error=i}finally{o.value.loading=!1}},p=i=>{v.push({path:`/stops/${i}`})},l=F(),h=l.getFavoriteById;return(i,n)=>(s(),t(g,null,[r("div",K,[f(r("input",{type:"text",placeholder:"Search...",class:"rounded-lg m-1 font-medium text-gray-800 px-3 py-1","onUpdate:modelValue":n[0]||(n[0]=e=>o.value.searchQuery=e),onKeyup:n[1]||(n[1]=b(e=>m(),["enter"]))},null,544),[[x,o.value.searchQuery]]),r("button",{class:"bg-green-400 rounded-lg m-1 font-medium text-gray-800 px-3 py-1",onClick:n[2]||(n[2]=e=>m())}," Suchen ")]),o.value.loading?(s(),t("div",A,j)):o.value.error?(s(),t("div",q,[w(d(o.value.error.message)+" ",1),r("span",E,"Reason: "+d(o.value.error.response.data.msg),1)])):o.value.stops?(s(),t("div",M,[(s(!0),t(g,null,C(o.value.stops,e=>(s(),t("div",{key:e.id,"data-test":"stop",class:"text-left py-1 cursor-pointer hover:text-green-400 relative"},[r("div",z,[r("div",{onClick:c=>p(e.id),"data-test":`stop-${e.id}`},d(e.name),9,G),u(h)(e.id)?(s(),t("img",{key:0,src:L,alt:"Favorite-Icon",class:"absolute right-0",onClick:c=>u(l).remove(e.id)},null,8,H)):(s(),t("img",{key:1,src:$,alt:"Kein-Favorite-Icon",class:"absolute right-0",onClick:c=>u(l).add(e.id)},null,8,J))]),r("div",{class:"flex space-x-2 mb-3 mt-1",onClick:c=>p(e.id)},[e.products.suburban?(s(),t("img",W)):a("",!0),e.products.subway?(s(),t("img",X)):a("",!0),e.products.tram?(s(),t("img",Y)):a("",!0),e.products.bus?(s(),t("img",Z)):a("",!0),e.products.ferry?(s(),t("img",ee)):a("",!0),e.products.express?(s(),t("img",se)):a("",!0),e.products.regional?(s(),t("img",te)):a("",!0)],8,P)]))),128))])):a("",!0)],64))}};export{re as default};
